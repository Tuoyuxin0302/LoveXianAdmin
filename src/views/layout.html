<script src="../../src/lib/extend/shiroPermissions.js"></script>
<script src="https://lovexiancity.xpu.edu.cn:450/articleCssJs/jquery.min.js"></script>

<!--<script src="../../src/lib/extend/editor.js"></script>-->
<script type="text/html" template>
  <link
    rel="stylesheet"
    href="{{ layui.setter.base }}style/lovexian.css?v={{ layui.admin.v }}-1"
    media="all"
  />
  <link
    rel="stylesheet"
    href="{{ layui.setter.base }}style/formSelects.css?v={{ layui.admin.v }}-1"
    media="all"
  />
  <link
    rel="stylesheet"
    href="{{ layui.setter.base }}style/eleTree.css?v={{ layui.admin.v }}-1"
    media="all"
  />
  <link
    rel="stylesheet"
    href="{{ layui.setter.base }}style/apexcharts.css?v={{ layui.admin.v }}-1"
    media="all"
  />
  <link
    rel="stylesheet"
    href="{{ layui.setter.base }}style/editor-style.css?v={{ layui.admin.v }}-1"
    media="all"
  />
  <link
    rel="stylesheet"
    href="{{ layui.setter.base }}style/preview-h5style.css?v={{ layui.admin.v }}-1"
    media="all"
  />
  <link
    rel="stylesheet"
    href="{{ layui.setter.base }}style/article.css?v={{ layui.admin.v }}-1"
    media="all"
  />
  <link
    rel="stylesheet"
    href="{{ layui.setter.base }}style/login-style.css?v={{ layui.admin.v }}-1"
    media="all"
  />
  <link
    rel="stylesheet"
    href="{{ layui.setter.base }}style/notice.css?v={{ layui.admin.v }}-1"
    media="all"
  />
  <link
    rel="stylesheet"
    href="{{ layui.setter.base }}style/font-awesome/css/font-awesome.css?v={{ layui.admin.v }}-1"
    media="all"
  />
</script>
<style>
  #text {
    margin: 50px auto;
    width: 500px;
  }
  .hotspot {
    color: #900;
    padding-bottom: 1px;
    border-bottom: 1px dotted #900;
    cursor: pointer;
  }
  #tt {
    position: absolute;
    display: block;
  }
  #tttop {
    display: block;
    height: 5px;
    margin-left: 5px;
    overflow: hidden;
  }
  #ttcont {
    display: block;
    padding: 2px 12px 3px 7px;
    margin-left: 5px;
    background: #666;
    color: #fff;
  }
  #ttbot {
    display: block;
    height: 5px;
    margin-left: 5px;
    overflow: hidden;
  }
  .cannot-click {
    pointer-events: none;
  }
</style>

<div class="layui-layout layui-layout-admin" style="background-color: #fcfcfc">
  <div class="layui-header" id="my-header">
    <!-- 头部区域 -->
    <ul class="layui-nav layui-layout-left">
      <li class="layui-nav-item layadmin-flexible" lay-unselect>
        <a href="javascript:;" layadmin-event="flexible" title="侧边伸缩">
          <i
            class="layui-icon layui-icon-shrink-right"
            id="LAY_app_flexible"
          ></i>
        </a>
      </li>
      <!--<li class="layui-nav-item layui-this layui-hide-xs layui-hide-sm layui-show-md-inline-block">
        <a lay-href="" title="">
          控制台
        </a>
      </li>-->
      <li class="layui-nav-item layui-hide-xs" lay-unselect>
        <a href="http://www.xpu.edu.cn/" target="_blank" title="开发团队">
          <i class="layui-icon layui-icon-website"></i>
        </a>
      </li>
      <li class="layui-nav-item" lay-unselect>
        <a href="javascript:;" layadmin-event="refresh" title="刷新">
          <i class="layui-icon layui-icon-refresh-3"></i>
        </a>
      </li>
      <!--      <li class="layui-nav-item layui-hide-xs" lay-unselect>-->
      <!--        <input type="text" placeholder="搜索..." autocomplete="off" class="layui-input layui-input-search" layadmin-event="serach" lay-action="template/search/keywords="> -->
      <!--      </li>-->
    </ul>
    <ul class="layui-nav layui-layout-right" lay-filter="layadmin-layout-right">
      <!--      <li class="layui-nav-item" lay-unselect>-->
      <!--        <a lay-href="app/message/" layadmin-event="message">-->
      <!--          <i class="layui-icon layui-icon-notice"></i>-->
      <!--          -->
      <!--          &lt;!&ndash; 如果有新消息，则显示小圆点 &ndash;&gt;-->
      <!--          <script type="text/html" template lay-url="./json/message/new.js">-->
      <!--          {{# if(d.data.newmsg){ }} -->
      <!--            <span class="layui-badge-dot"></span>-->
      <!--          {{# } }}-->
      <!--          </script>-->
      <!--          -->
      <!--        </a>-->
      <!--      </li>-->
      <li class="layui-nav-item layui-hide-xs" lay-unselect>
        <a href="javascript:;" layadmin-event="theme">
          <i class="layui-icon layui-icon-theme"></i>
        </a>
      </li>
      <!--      <li class="layui-nav-item layui-hide-xs" lay-unselect>-->
      <!--        <a href="javascript:;" layadmin-event="note">-->
      <!--          <i class="layui-icon layui-icon-note"></i>-->
      <!--        </a>-->
      <!--      </li>-->
      <li class="layui-nav-item layui-hide-xs" lay-unselect>
        <a href="javascript:;" layadmin-event="fullscreen">
          <i class="layui-icon layui-icon-screen-full"></i>
        </a>
      </li>

      <li class="layui-nav-item" lay-unselect>
        <script
          type="text/html"
          template
          lay-url="./json/user/session.js"
          lay-done="layui.element.render('nav', 'layadmin-layout-right');"
        >
          <a href="javascript:;">
            <cite
              >{{
              layui.data(layui.setter.tableName)[layui.setter.USERNAME]['username']
              }}</cite
            >
          </a>
          <dl class="layui-nav-child">
            <dd><a lay-href="set/user/info">基本资料</a></dd>
            <dd><a lay-href="set/user/password">修改密码</a></dd>
            <hr />
            <dd layadmin-event="logout" style="text-align: center;">
              <a>退出</a>
            </dd>
          </dl>
        </script>
      </li>

      <li class="layui-nav-item layui-hide-xs" lay-unselect>
        <a href="javascript:;" layadmin-event="about"
          ><i class="layui-icon layui-icon-more-vertical"></i
        ></a>
      </li>

      <!--      <li class="layui-nav-item layui-show-xs-inline-block layui-hide-sm" lay-unselect>-->
      <!--        <a href="javascript:;" layadmin-event="more"><i class="layui-icon layui-icon-more-vertical"></i></a>-->
      <!--      </li>-->
    </ul>
  </div>

  <!-- 侧边菜单 -->
  <div class="layui-side layui-side-menu" id="my-side">
    <div class="layui-side-scroll">
      <!--      http://localhost:9090/system/menu/mrbird-->
      <script
        type="text/html"
        template
        lay-url="http://117.35.182.173:7372/system/menu/menu"
        lay-done="layui.element.render('nav', 'layadmin-system-side-menu');"
        id="TPL_layout"
      >

        <div class="layui-logo" lay-href="">
          <span>{{ layui.setter.name || 'layuiAdmin' }}</span>
        </div>

        <ul class="layui-nav layui-nav-tree" lay-shrink="all" id="LAY-system-side-menu" lay-filter="layadmin-system-side-menu">
        {{#
          if(d.code == 1001){
              layer.confirm('登录状态已失效，请退出系统重新登录', {icon: 9, title:'登录状态'}, function(index){
                layer.msg('即将退出...', {
                  time: 2000
                  }, function(){
                  layer.close(index);
                  layui.admin.exit();
                });
              });
          }
          if(d.code == 1002){
            layer.confirm('由于您的账号在其他地方登录了！此会话已失效', {icon: 9, title:'登录状态'}, function(index){
              layer.msg('即将退出...', {
                time: 2000
                }, function(){
                layer.close(index);
                layui.admin.exit();
              });
            });
        }

          var path =  layui.router().path
          ,pathURL = layui.admin.correctRouter(path.join('/'))
          ,dataName = layui.setter.response.dataName;

          layui.each(d[dataName], function(index, item){
            var hasChildren = typeof item.list === 'object' && item.list.length > 0
            ,classSelected = function(){
              var match = path[0] == item.name || (index == 0 && !path[0])
              || (item.jump && pathURL == layui.admin.correctRouter(item.jump)) || item.spread;
              if(match){
                return hasChildren ? 'layui-nav-itemed' : 'layui-this';
              }
              return '';
            }
            ,url = (item.jump && typeof item.jump === 'string') ? item.jump : item.name;

        }}

        <li data-name="{{ item.name || '' }}" data-jump="{{ item.jump || '' }}" class="layui-nav-item {{ classSelected() }} " {{ d.changePass == 1?'':'onmouseover="tooltip.show();"' }} onmouseout="tooltip.hide();" >
          <a href="javascript:;" {{ hasChildren ? '' : 'lay-href="'+ url +'"' }} lay-tips="{{ item.title }}" lay-direction="2" {{ d.changePass===1 ? '' : 'class="cannot-click"' }} >
              <i class="layui-icon {{ item.icon }}"></i>
              <cite>{{ item.title }}</cite>
            </a>
            {{# if(hasChildren){ }}
              <dl class="layui-nav-child">
              {{# layui.each(item.list, function(index2, item2){
                var hasChildren2 = typeof item2.list == 'object' && item2.list.length > 0
                ,classSelected2 = function(){
                  var match = (path[0] == item.name && path[1] == item2.name)
                  || (item2.jump && pathURL == layui.admin.correctRouter(item2.jump)) || item2.spread;
                  if(match){
                    return hasChildren2 ? 'layui-nav-itemed' : 'layui-this';
                  }
                  return '';
                }
                ,url2 = (item2.jump && typeof item2.jump === 'string')
                  ? item2.jump
                : [item.name, item2.name, ''].join('/');
              }}
                <dd  data-name="{{ item2.name || '' }}"  data-jump="{{ item2.jump || '' }}"
                {{ classSelected2() ? ('class="'+ classSelected2() +'"') : '' }}>
                  <a href="javascript:;" {{ hasChildren2 ? '' : 'lay-href="'+ url2 +'"' }}><i class="layui-icon {{ item2.icon }}"></i>{{ item2.title }}</a>
                  {{# if(hasChildren2){ }}
                    <dl class="layui-nav-child">
                      {{# layui.each(item2.list, function(index3, item3){
                        var match = (path[0] == item.name && path[1] == item2.name && path[2] == item3.name)
                        || (item3.jump && pathURL == layui.admin.correctRouter(item3.jump))
                        ,url3 = (item3.jump && typeof item3.jump === 'string')
                          ? item3.jump
                        : [item.name, item2.name, item3.name].join('/')
                      }}
                        <dd data-name="{{ item3.name || '' }}"  data-jump="{{ item3.jump || '' }}"
                        {{ match ? 'class="layui-this"' : '' }}>
                          <a href="javascript:;" lay-href="{{ url3 }}" {{ item3.iframe ? 'lay-iframe="true"' : '' }}><i class="layui-icon {{ item3.icon }}"></i>{{ item3.title }}</a>
                        </dd>
                      {{# }); }}
                    </dl>
                  {{# } }}
                </dd>
            {{# }); }}
            </dl>
            {{# } }}
          </li>
        {{# }); }}
        </ul>
      </script>
    </div>
  </div>

  <!-- 页面标签 -->
  <script
    type="text/html"
    template
    lay-done="layui.element.render('nav', 'layadmin-pagetabs-nav')"
  >
    {{# if(layui.setter.pageTabs){ }}
    <div class="layadmin-pagetabs" id="LAY_app_tabs">
      <div
        class="layui-icon layadmin-tabs-control layui-icon-prev"
        layadmin-event="leftPage"
      ></div>
      <div
        class="layui-icon layadmin-tabs-control layui-icon-next"
        layadmin-event="rightPage"
      ></div>
      <div class="layui-icon layadmin-tabs-control layui-icon-down">
        <ul
          class="layui-nav layadmin-tabs-select"
          lay-filter="layadmin-pagetabs-nav"
        >
          <li class="layui-nav-item" lay-unselect>
            <a href="javascript:;"></a>
            <dl class="layui-nav-child layui-anim-fadein">
              <dd layadmin-event="closeThisTabs">
                <a href="javascript:;">关闭当前标签页</a>
              </dd>
              <dd layadmin-event="closeOtherTabs">
                <a href="javascript:;">关闭其它标签页</a>
              </dd>
              <dd layadmin-event="closeAllTabs">
                <a href="javascript:;">关闭全部标签页</a>
              </dd>
            </dl>
          </li>
        </ul>
      </div>
      <div
        class="layui-tab"
        lay-unauto
        lay-allowClose="true"
        lay-filter="layadmin-layout-tabs"
      >
        <ul class="layui-tab-title" id="LAY_app_tabsheader">
          <li lay-id="/"><i class="layui-icon layui-icon-home"></i></li>
        </ul>
      </div>
    </div>
    {{# } }}
  </script>

  <!-- 主体内容 -->
  <div class="layui-body" id="LAY_app_body">
    <div class="layadmin-tabsbody-item layui-show"></div>
  </div>

  <!-- 辅助元素，一般用于移动设备下遮罩 -->
  <div class="layadmin-body-shade" layadmin-event="shade"></div>
</div>
<script>
  layui.use(["lovexian"], function () {
    var lovexian = layui.lovexian;
    lovexian.websocketUtil();
    lovexian.websocketUtil2Video();
  });
  var tooltip = (function () {

    var id = "tt";
    var top = 3;
    var left = 3;
    var maxw = 300;
    var speed = 10;
    var timer = 20;
    var endalpha = 95;
    var alpha = 0;
    var tt, t, c, b, h;
    var ie = document.all ? true : false;
    return {
      show: function (v, w) {
        if (tt == null) {
          tt = document.createElement("div");
          tt.setAttribute("id", id);
          tt.style.zIndex = 899999999999999;
          tt.style.width = "100px";
          tt.style.position = "absoulate";
          t = document.createElement("div");
          t.setAttribute("id", id + "top");
          c = document.createElement("div");
          c.setAttribute("id", id + "cont");
          b = document.createElement("div");
          b.setAttribute("id", id + "bot");
          tt.appendChild(t);
          tt.appendChild(c);
          tt.appendChild(b);
          document.getElementById("my-side").appendChild(tt);
          tt.style.opacity = 0;
          tt.style.filter = "alpha(opacity=0)";
          document.onmousemove = this.pos;
        }
        tt.style.display = "block";
        c.innerHTML =
          '<img style="position:fixed;z-index:9999999999;" src="../src/images/cannot-click.png"/>';
        tt.style.width = w ? w + "px" : "auto";
        tt.style.zIndex = 99999999999;
        if (!w && ie) {
          t.style.display = "none";
          b.style.display = "none";
          tt.style.width = tt.offsetWidth;
          t.style.display = "block";
          b.style.display = "block";
        }
        if (tt.offsetWidth > maxw) {
          tt.style.width = maxw + "px";
        }
        h = parseInt(tt.offsetHeight) + top;
        //clearInterval(tt.timer);
        //tt.timer = setInterval(function () {
        //  tooltip.fade(1);
        //}, timer);
      },
      pos: function (e) {
        var u = ie
          ? event.clientY + document.documentElement.scrollTop
          : e.pageY;
        var l = ie
          ? event.clientX + document.documentElement.scrollLeft
          : e.pageX;
        tt.style.top = u - h + "px";
        tt.style.left = l + left + "px";
      },
      fade: function (d) {
        var a = alpha;
        if ((a != endalpha && d == 1) || (a != 0 && d == -1)) {
          var i = speed;
          if (endalpha - a < speed && d == 1) {
            i = endalpha - a;
          } else if (alpha < speed && d == -1) {
            i = a;
          }
          alpha = a + i * d;
          tt.style.opacity = alpha * 0.01;
          tt.style.filter = "alpha(opacity=" + alpha + ")";
        } else {
          //clearInterval(tt.timer);
          if (d == -1) {
            tt.style.display = "none";
          }
        }
      },
      hide: function () {
        //clearInterval(tt.timer);
        //tt.timer = setInterval(function () {
        //  tooltip.fade(-1);
        //}, timer);
      },
    };
  })();
</script>
